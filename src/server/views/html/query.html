<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Query for STEAN</title>
    <link rel="stylesheet" href="social.css">
    <link rel="stylesheet" href="patrom.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="stylesheet" href="query.css">
    <link rel="stylesheet" href="spinner.css">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="splitter.css">
    <link rel="stylesheet" href="queryBuilder.css">
    <link rel="stylesheet" href="window.css">
    <link rel="stylesheet" href="logs.css">
    <script src="constant.js"></script>
    <script src="gui.js"></script>
    <script src="splitter.js"></script>
    <script>
      (function(e, t, n) {
        var r = e.querySelectorAll("html")[0];
        r.className = r.className.replace(/(^|\s)no-js(\s|$)/, "$1js$2")
      })(document, window, 0);
    </script>
  </head>
  <body>
    <div id="spinner" class="loading">Loading&#8230;</div>
    <div id="container">
      <div id="first">
        <div id="popup" class="popup">
          <div class='popup-text' id="parici">
            <pre id="pre">Nothing</pre>
          </div>
          <a id="popupClose" class='popup-close' href="#">X</a>
        </div>
        <form name="import" id="actionForm" form="pro-form" enctype="multipart/form-data" action="" onsubmit="prepareForm()" method="POST">
          <!-- START ACCORDION -->
          <div class="patrom-accordions pro-form">
            <!-- Entities -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" id="chck1" checked>
              <label class="patrom-accordion-label" for="chck1">Entities</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Entity -->
                  <div class="patrom-col-span-6">
                      <label for="entity">Entity :</label>
                      <select class="patrom-select fillCol" tabindex="1" name="entityOption" id="entityOption"></select>
                  </div>
                  <!-- Id -->
                  <div class="patrom-col-span-3">
                      <label for="idOption">Id :</label>
                      <input id="idOption" name="idOption" type="text" class="patrom-text-input fillCol">
                  </div>
                  <!-- Operation -->
                  <div class="patrom-col-span-3">
                      <label for="methodOption">Verb :</label>
                      <select class="patrom-select fillCol" tabindex="1" name="8" id="methodOption"></select>
                  </div>
                </div>
                <div class="patrom-row">
                  <!-- Sub Entity -->
                  <div class="patrom-col-span-6">
                      <label for="subentityOption">SubEntity :</label>
                      <select class="patrom-select fillCol" tabindex="1" name="subentityOption" id="subentityOption"></select>
                  </div>
                  <!-- ID idSub -->
                  <div class="patrom-col-span-3">
                      <label for="idSubOption">Id :</label>
                      <input id="idSubOption" type="text" name="idSubOption" class="patrom-text-input fillCol">
                  </div>
                  <!-- Result -->
                  <div class="patrom-col-span-3">
                      <label for="resultFormatOption">Result :</label>
                      <select class="patrom-select fillCol" tabindex="1" name="resultFormatOption" id="resultFormatOption"></select>
                  </div>
                </div>
                <!-- Payload -->
                <div class="patrom-row" id="payloadPartTab">
                  <div class="patrom-col-span-12">
                      <label for="payload">Payload :</label>
                      <input id="payload" type="text" class="patrom-text-input width75">
                  </div>
                </div>
              </div>
            </div>
            <!-- Root Skip & Top -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" id="chck2">
              <label class="patrom-accordion-label" for="chck2">Root Skip & Top</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Root -->
                  <div class="patrom-col-span-10">
                      <label for="optHost">Root :</label>
                      <input id="optHost" name="optHost" type="text" class="patrom-text-input fillCol">
                  </div>
                  <!-- Version -->
                  <div class="patrom-col-span-2">
                    <label for="optVersion">Version :</label>
                    <input id="optVersion" name="optVersion" maxlength="5" type="text" class="patrom-text-input fillCol" size="4">
                  </div>
                </div>
                <div class="patrom-row">
                  <!-- Count -->
                  <div class="patrom-col-span-4">                    
                    <label class="patrom-checkbox-labeled fillCol">Count <input type="checkbox" id="countOption">
                      <span class="checkmark"></span>
                    </label>
                  </div>
                  <!-- Top -->
                  <div class="patrom-col-span-4">
                      <label for="top">Top :</label>
                      <input id="topOption" name="top" maxlength="8" type="text" class="patrom-text-input fillCol" size="6">
                  </div>
                  <!-- Skip -->
                  <div class="patrom-col-span-4">
                      <label for="skip">Skip :</label>
                      <input id="skipOption" name="skip" maxlength="8" type="text" class="patrom-text-input fillCol" size="6">
                  </div>
                </div>
              </div>
            </div>
            <!-- Expand -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="expandTab" id="chck3">
              <label class="patrom-accordion-label" for="chck3">Expand</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Expand -->
                  <div class="patrom-col-span-6">
                      <label for="expandOption">Expand :</label>
                      <select class="patrom-multiselect fillCol" id="expandOption"></select>
                  </div>
                  <!-- Sub Expand -->
                  <div class="patrom-col-span-6">
                      <label for="subExpandOption">Sub Expand :</label>
                      <select class="patrom-multiselect fillCol" id="subExpandOption"></select>
                  </div>
                </div>
              </div>
            </div>
            <!-- Property -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="propertyTab" id="chck4">
              <label class="patrom-accordion-label" for="chck4">Property</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Property -->
                  <div class="patrom-col-span-8">
                    <label for="propertyOption">Property : </label>
                    <select class="patrom-select fillCol" tabindex="1" id="propertyOption"></select>
                  </div>
                  <!-- Only Value -->
                  <div class="patrom-col-span-4">
                      <label class="patrom-checkbox-labeled fillCol">Only value <input type="checkbox" id="onlyValueOption">
                        <span class="checkmark"></span>
                      </label>
                      <!-- Count & ref -->
                      <label class="patrom-checkbox-labeled fillCol">Ref <input type="checkbox" id="refOption">
                        <span class="checkmark"></span>
                      </label>
                  </div>
                </div>
              </div>
            </div>
            <!-- Query Builder -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="queryBuilderTab" id="chck5">
              <label class="patrom-accordion-label" for="chck5">Query Builder</label>
              <div class="patrom-accordion-content">
                <!-- Select & Order-->
                <div class="patrom-row">
                  <!-- Select -->
                  <div class="patrom-col-span-6">
                      <label for="selectOption">Select :</label>
                      <select class="patrom-multiselect fillCol" id="selectOption"></select>
                  </div>
                  <!-- Order -->
                  <div class="patrom-col-span-6">
                      <label for="orderbyOption">Order :</label>
                      <select class="patrom-multiselect fillCol" id="orderbyOption" selectAll="true" orderby="true"></select>
                  </div>
                </div>
                <!-- query-builder -->
                <div class="patrom-row">
                  <div class="patrom-col-span-12">
                    <textarea id="query-builder"></textarea>
                  </div>
                </div>
              </div>
            </div>
            <!-- Observations Options -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="observationsTab" id="chck6">
              <label class="patrom-accordion-label" for="chck6">Observations Options</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Date Min -->
                  <div class="patrom-col-span-6">
                      <label for="dateMin">Date mini</label>
                      <input class="fillCol" type="datetime-local" id="dateMin" value="">
                  </div>
                  <!-- Date Max -->
                  <div class="patrom-col-span-6">
                      <label for="dateMax">Date max</label>
                      <input class="fillCol" type="datetime-local" id="dateMax" value="">
                  </div>
                </div>
                <!-- interval Field -->
                <div class="patrom-row">
                  <div class="patrom-col-span-6">
                      <label for="intervalOption">Interval : </label>
                      <input id="intervalOption" type="text" class="patrom-text-input fillCol" placeholder=" (1 week, 1 day, 15 minutes ...)">
                  </div>
                  <!-- splitResult -->
                  <div class="patrom-col-span-6">
                    <label for="splitResult">splitResult</label>
                    <input id="splitResultOption" type="text" class="patrom-text-input fillCol">
                </div>                  
              </div>
              <!-- special tools -->
              <div class="patrom-row">
                  <!-- valueskeys -->
                  <div class="patrom-col-span-3">
                    <label class="patrom-checkbox-labeled fillCol">valueskeys <input type="checkbox" id="valueskeysOption">
                      <span class="checkmark"></span>
                    </label>
                  </div>

                </div>
              </div>
            </div>
            <!-- Import File  -->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="importTab" id="chck7">
              <label class="patrom-accordion-label" for="chck7">Import File</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <div class="patrom-col-span-12">
                    <input type="file" name="file" id="fileone" class="inputfile inputfile-1 size-default" accept=".csv, .txt, .json, kls, xlsx" data-multiple-caption="{count} files selected" multiple="">
                    <label id="fileonelabel" for="fileone" class="fillCol">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17">
                        <path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path>
                      </svg>
                      <span>File(s) …</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tools-->
            <div class="patrom-accordion">
              <input class="patrom-accordion-check" type="checkbox" name="toolsTab" id="chck8">
              <label class="patrom-accordion-label" for="chck8">Tools</label>
              <div class="patrom-accordion-content">
                <div class="patrom-row">
                  <!-- Root -->
                  <div class="patrom-col-span-2">
                      <label for="optDistHost">root</label>
                    </div>
                  <div class="patrom-col-span-10">
                    <input id="optDistHost" name="optDistHost" type="text" class="patrom-text-input fillCol" >
                  </div>
                </div>
                <div class="patrom-row">
                  <!-- Step -->
                  <div class="patrom-col-span-3">
                    <label for="optDistHostStep">Step :</label>
                    <input id="optDistHostStep" name="optDistHostStep" type="text" class="patrom-text-input fillCol">
                  </div>
                  <!-- Start -->
                  <div class="patrom-col-span-3">
                    <label for="optDistHostStart">Start :</label>
                    <input id="optDistHostStart" name="optDistHostStart" type="text" class="patrom-text-input fillCol">
                  </div>
                </div>

                <div class="patrom-row">
                  <!-- Buttons copy -->
                  <div class="patrom-col-span-6">
                    <button id="btnCopyService" name="btnCopyService" type="button">Copy structure</button>
                  </div>
                  <div class="patrom-col-span-6">
                    <button id="btnCopyServiceStart" name="btnCopyServiceStart" type="button">copy observations</button>
                  </div>
                </div>
                <div class="patrom-row">
                  <div id="progression" class="progression testprog">80%</div>
              </div>
              </div>
            </div>


          </div>
          <!-- END ACCORDION -->
          <!-- OPTIONS -->
          <div class="patrom-row">
              <input id="queryOptions" type="text" class="patrom-text-input fillCol">
          </div>

          <!-- BUTTONS ICONS -->
          <div class="patrom-row left">
            <div class="patrom-col-span-12">
              <div class="patrom-row left">
                <button type="button" id="btnRoot" class="patrom-button-bar__button size-lg" title="Root">
                  <svg width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="none">
                    <path class="svg-icon" fill-rule="evenodd" 
                    d="M11.126 2.601a.75.75 0 00-1.025.273l-5.5 9.5a.75.75 0 001.298.752l5.5-9.5a.75.75 0 00-.273-1.025z" clip-rule="evenodd" />
                  </svg>
                </button>
                <button type="button" id="logout" class="patrom-button-bar__button size-lg" title="Logout">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path class="svg-icon" d="M16 9v-4l8 7-8 7v-4h-8v-6h8zm-2 10v-.083c-1.178.685-2.542 1.083-4 1.083-4.411 0-8-3.589-8-8s3.589-8 8-8c1.458 0 2.822.398 4 1.083v-2.245c-1.226-.536-2.577-.838-4-.838-5.522 0-10 4.477-10 10s4.478 10 10 10c1.423 0 2.774-.302 4-.838v-2.162z" />
                  </svg>
                </button>
                <button type="button" id="info" class="patrom-button-bar__button size-lg" title="Status">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path class="svg-icon" d="M12 1c-6.338 0-12 4.226-12 10.007 0 2.05.739 4.063 2.047 5.625.055 1.83-1.023 4.456-1.993 6.368 2.602-.47 6.301-1.508 7.978-2.536 9.236 2.247 15.968-3.405 15.968-9.457 0-5.812-5.701-10.007-12-10.007zm1 15h-2v-6h2v6zm-1-7.75c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25z" />
                  </svg>
                </button>
                <button type="button" id="btnPostTemplate" class="patrom-button-bar__button size-lg" title="Template">
                  <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path class="svg-icon" d="M5,3H7V5H5v5a2,2,0,0,1-2,2,2,2,0,0,1,2,2v5H7v2H5c-1.07-.27-2-.9-2-2V15a2,2,0,0,0-2-2H0V11H1A2,2,0,0,0,3,9V5A2,2,0,0,1,5,3M19,3a2,2,0,0,1,2,2V9a2,2,0,0,0,2,2h1v2H23a2,2,0,0,0-2,2v4a2,2,0,0,1-2,2H17V19h2V14a2,2,0,0,1,2-2,2,2,0,0,1-2-2V5H17V3h2M12,15a1,1,0,1,1-1,1,1,1,0,0,1,1-1M8,15a1,1,0,1,1-1,1,1,1,0,0,1,1-1m8,0a1,1,0,1,1-1,1A1,1,0,0,1,16,15Z" />
                  </svg>
                </button>
                <button type="button" id="btnShowLinks" class="patrom-button-bar__button size-lg" title="generate url">
                  <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24" height="24" viewBox="0 0 425.466 425.467" style="enable-background:new 0 0 425.466 425.467;" xml:space="preserve"><g>	<g>		<g>			
                    <path class="svg-icon" d="M318.15,230.195l77.934-77.937c31.894-31.892,31.894-83.782-0.004-115.674l-12.66-12.66     c-31.893-31.896-83.78-31.896-115.674-0.004l-77.937,77.934c-17.588,17.588-25.457,41.264-23.646,64.311     c-23.045-1.813-46.722,6.056-64.308,23.647L23.92,267.748c-31.894,31.889-31.894,83.779,0,115.674l12.664,12.662     c31.893,31.893,83.783,31.893,115.674,0l77.935-77.936c17.592-17.59,25.459-41.266,23.647-64.309     C276.884,255.654,300.56,247.783,318.15,230.195z M202.653,290.605l-77.936,77.938c-16.705,16.703-43.889,16.703-60.59,0     l-12.666-12.666c-16.705-16.701-16.703-43.885,0-60.594l77.936-77.932c14.14-14.141,35.779-16.306,52.226-6.516l-32.302,32.307     c-7.606,7.604-7.606,19.938,0,27.541c7.605,7.607,19.937,7.607,27.541,0l32.306-32.303     C218.959,254.828,216.795,276.469,202.653,290.605z M238.382,209.169l32.299-32.306c7.608-7.602,7.608-19.935,0-27.538     c-7.604-7.61-19.936-7.61-27.541-0.004l-32.303,32.303c-9.791-16.446-7.627-38.087,6.514-52.226l77.935-77.935     c16.707-16.707,43.89-16.707,60.594,0l12.664,12.664c16.705,16.705,16.705,43.886,0,60.591l-77.936,77.937     C276.468,216.797,254.828,218.959,238.382,209.169z" />			
                    <path class="svg-icon" d="M343.466,261.465c-45.287,0-82,36.713-82,82s36.713,82,82,82c45.286,0,82-36.713,82-82S388.753,261.465,343.466,261.465z      M372.505,333.564l-56.046,56.104c-0.239,0.238-0.536,0.41-0.862,0.496l-22.315,5.85c-0.649,0.168-1.347-0.02-1.822-0.494     c-0.477-0.479-0.666-1.172-0.496-1.824l5.826-22.318c0.084-0.326,0.256-0.627,0.494-0.863l56.047-56.104     c0.742-0.742,1.945-0.744,2.688-0.002l4.548,4.541c0.739,0.74,0.741,1.943,0,2.688l-37.433,37.471l4.709,4.703l37.435-37.471     c0.739-0.742,1.94-0.742,2.682-0.002l4.55,4.541C373.25,331.617,373.25,332.822,372.505,333.564z M395.472,310.574l-17,17.018     c-0.739,0.744-1.942,0.744-2.685,0.002l-16.489-16.475c-0.744-0.74-0.744-1.943-0.002-2.688l17-17.02     c0.741-0.74,1.944-0.74,2.688-0.002l16.487,16.477C396.216,308.629,396.216,309.832,395.472,310.574z" />		</g>	</g></g>
                  </svg>
                </button>
                <button type="button" id="btnShowGeo" class="patrom-button-bar__button size-lg" title="GeoJson">
                  <svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path class="svg-icon" fill-rule="evenodd" clip-rule="evenodd" d="M23.4236 41.8172C23.424 41.8174 23.4243 41.8176 24 41L23.4236 41.8172ZM24.5764 41.8172L24.58 41.8146L24.5891 41.8082L24.6209 41.7854C24.6482 41.7658 24.6875 41.7374 24.7379 41.7004C24.8387 41.6263 24.9842 41.5178 25.1681 41.3765C25.5357 41.0938 26.0571 40.6794 26.6811 40.1459C27.9277 39.08 29.5908 37.5328 31.2565 35.6059C34.5639 31.7799 38 26.3195 38 20.0769C38 16.3454 36.5264 12.7655 33.9016 10.1251C31.2765 7.48454 27.7149 6 24 6C20.2851 6 16.7235 7.48454 14.0984 10.1251C11.4736 12.7655 10 16.3454 10 20.0769C10 26.3195 13.4361 31.7799 16.7435 35.6059C18.4092 37.5328 20.0723 39.08 21.3189 40.1459C21.9429 40.6794 22.4643 41.0938 22.8319 41.3765C23.0158 41.5178 23.1613 41.6263 23.2621 41.7004C23.3125 41.7374 23.3518 41.7658 23.3791 41.7854L23.4109 41.8082L23.42 41.8146L23.4236 41.8172C23.7689 42.0603 24.2311 42.0603 24.5764 41.8172ZM24 41L24.5764 41.8172C24.576 41.8174 24.5757 41.8176 24 41ZM29 20C29 22.7614 26.7614 25 24 25C21.2386 25 19 22.7614 19 20C19 17.2386 21.2386 15 24 15C26.7614 15 29 17.2386 29 20Z"/>
                  </svg>
                </button>
                <button type="button" id="debug" class="patrom-button-bar__button size-lg" title="Debug">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path class="svg-icon" d="M10.94 13.5l-1.32 1.32a3.73 3.73 0 0 0-7.24 0L1.06 13.5 0 14.56l1.72 1.72-.22.22V18H0v1.5h1.5v.08c.077.489.214.966.41 1.42L0 22.94 1.06 24l1.65-1.65A4.308 4.308 0 0 0 6 24a4.31 4.31 0 0 0 3.29-1.65L10.94 24 12 22.94 10.09 21c.198-.464.336-.951.41-1.45v-.1H12V18h-1.5v-1.5l-.22-.22L12 14.56l-1.06-1.06zM6 13.5a2.25 2.25 0 0 1 2.25 2.25h-4.5A2.25 2.25 0 0 1 6 13.5zm3 6a3.33 3.33 0 0 1-3 3 3.33 3.33 0 0 1-3-3v-2.25h6v2.25zm14.76-9.9v1.26L13.5 17.37V15.6l8.5-5.37L9 2v9.46a5.07 5.07 0 0 0-1.5-.72V.63L8.64 0l15.12 9.6z" />
                  </svg>
                </button>
                <button class="patrom-button patrom-button--success" id="go">Query</button>
                <button type="submit" class="patrom-button patrom-button--success" id="submit">Import file</button>

              </div>
            </div>
          </div>
          <!-- JSON DATAS --> 
          @jsonDatas@

        </form>
        <div class="patrom-row">
          <!-- Services -->
          <div class="patrom-col-span-8">
            <label for="service">Service :</label>
            <select class="patrom-select fillCol" tabindex="1" name="service" id="services"></select>
          </div>
          <div class="patrom-col-span-4">
            <label for="theme">Theme color :</label>
            <label class="patrom-switch">
              <input id="theme" type="checkbox" class="patrom-switch__input" onchange="setTheme(localStorage.getItem('theme') === 'dark' ? 'light' : 'dark');">
              <div class="patrom-switch__theme fillCol"></div>
            </label>
          </div>
        </div>

      </div>
      <!-- SOCIAL PANEL HTML -->
       @social@
    </div>
    <div id="two">
      <div id="json"></div>
      <div id="graphContainer">
        <div id="graph" class="lol"></div>
      </div>
    </div>
    <div id="modalOverlay"></div>
    </div>
    <script src="refresh.js"></script>
    <script src="helper.js"></script>
    <script src="queryBuilder.js"></script>
    <script src="url.js"></script>
    <script src="patrom.js"></script>
    <script src="multiSelect.js"></script>
    <script src="modal.js"></script>
    <script src="query.js"></script>
    <script src="csv.js"></script>
    <script src="graph.js"></script>
    <script src="window.js"></script>
    <script src="logs.js"></script>
    <script src="windowList.js"></script>
    <script src="social.js"></script>
    <script src="steanPrism.js"></script>
    <script src="tools.js"></script>
    <script src="queryEvent.js"></script>
  </body>
</html>